<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2026-01-09" />
  <title>rinetd-uv - internet redirection server</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">rinetd-uv - internet redirection server</h1>
<p class="date">2026-01-09</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#rinetd-uv8---internet-redirection-server"
id="toc-rinetd-uv8---internet-redirection-server">rinetd-uv(8) -
internet redirection server</a>
<ul>
<li><a href="#name" id="toc-name">NAME</a></li>
<li><a href="#synopsis" id="toc-synopsis">SYNOPSIS</a></li>
<li><a href="#description" id="toc-description">DESCRIPTION</a></li>
<li><a href="#run" id="toc-run">RUN</a></li>
<li><a href="#options" id="toc-options">OPTIONS</a></li>
<li><a href="#forwarding-rules" id="toc-forwarding-rules">FORWARDING
RULES</a></li>
<li><a href="#forwarding-options" id="toc-forwarding-options">FORWARDING
OPTIONS</a></li>
<li><a href="#global-configuration-options"
id="toc-global-configuration-options">GLOBAL CONFIGURATION
OPTIONS</a></li>
<li><a href="#include-directive" id="toc-include-directive">INCLUDE
DIRECTIVE</a></li>
<li><a href="#allow-and-deny-rules" id="toc-allow-and-deny-rules">ALLOW
AND DENY RULES</a></li>
<li><a href="#example-configuration"
id="toc-example-configuration">EXAMPLE CONFIGURATION</a></li>
<li><a href="#reinitializing-rinetd-uv"
id="toc-reinitializing-rinetd-uv">REINITIALIZING RINETD-UV</a></li>
<li><a href="#run-with-docker" id="toc-run-with-docker">RUN WITH
DOCKER</a></li>
<li><a href="#bugs-and-limitations" id="toc-bugs-and-limitations">BUGS
AND LIMITATIONS</a></li>
<li><a href="#performance-notes" id="toc-performance-notes">PERFORMANCE
NOTES</a></li>
<li><a href="#license" id="toc-license">LICENSE</a></li>
<li><a href="#contact-information" id="toc-contact-information">CONTACT
INFORMATION</a></li>
<li><a href="#thanks" id="toc-thanks">THANKS</a></li>
<li><a href="#llm" id="toc-llm">LLM</a></li>
<li><a href="#see-also" id="toc-see-also">SEE ALSO</a></li>
</ul></li>
</ul>
</nav>
<h1 id="rinetd-uv8---internet-redirection-server">rinetd-uv(8) -
internet redirection server</h1>
<h2 id="name">NAME</h2>
<p>rinetd-uv - internet redirection server</p>
<h2 id="synopsis">SYNOPSIS</h2>
<pre><code>rinetd-uv [-f] [-c configuration]
rinetd-uv -h
rinetd-uv -v</code></pre>
<h2 id="description">DESCRIPTION</h2>
<p><strong>rinetd-uv</strong> redirects TCP or UDP connections from one
IP address and port to another. <strong>rinetd-uv</strong> is a
single-process server which handles any number of connections to the
address/port pairs specified in the file
<code>/etc/rinetd-uv.conf</code>. Since <strong>rinetd-uv</strong> runs
as a single process using nonblocking I/O (via libuv event loop), it is
able to redirect a large number of connections without a severe impact
on the machine. This makes it practical to run services on machines
inside an IP masquerading firewall.</p>
<h3 id="libuv">Libuv</h3>
<p><strong>rinetd-uv</strong> is a modernized implementation of the
original rinetd daemon, rewritten to use the libuv event loop library.
While maintaining backward compatibility with the original rinetd
configuration format, rinetd-uv features a completely rewritten internal
architecture.</p>
<h2 id="run">RUN</h2>
<p><strong>rinetd-uv</strong> is typically launched at boot time, using
the following syntax:</p>
<pre><code>/usr/sbin/rinetd-uv</code></pre>
<p>The configuration file is found in the file
<code>/etc/rinetd-uv.conf</code>, unless another file is specified using
the <code>-c</code> command line option.</p>
<h2 id="options">OPTIONS</h2>
<dl>
<dt><strong>-f</strong></dt>
<dd>
Run <strong>rinetd-uv</strong> in the foreground, without forking to the
background.
</dd>
<dt><strong>-c</strong> <em>configuration</em></dt>
<dd>
Specify an alternate configuration file.
</dd>
<dt><strong>-d</strong></dt>
<dd>
Enable debug logging. Shows detailed information about DNS refresh
operations, connection failures triggering re-resolution, and other
internal operations.
</dd>
<dt><strong>-v</strong></dt>
<dd>
Display the version number and exit.
</dd>
<dt><strong>-h</strong></dt>
<dd>
Produce a short help message and exit.
</dd>
</dl>
<h2 id="forwarding-rules">FORWARDING RULES</h2>
<p>Most entries in the configuration file are forwarding rules. The
format of a forwarding rule is as follows:</p>
<pre><code>bindaddress bindport connectaddress connectport [options...]</code></pre>
<p>For example:</p>
<pre><code>206.125.69.81 80  10.1.1.2 80</code></pre>
<p>Would redirect all connections to port 80 of the “real” IP address
206.125.69.81, which could be a virtual interface, through
<strong>rinetd-uv</strong> to port 80 of the address 10.1.1.2, which
would typically be a machine on the inside of a firewall which has no
direct routing to the outside world.</p>
<p>Although responding on individual interfaces rather than on all
interfaces is one of <strong>rinetd-uv</strong>’s primary features,
sometimes it is preferable to respond on all IP addresses that belong to
the server. In this situation, the special IP address
<code>0.0.0.0</code> can be used. For example:</p>
<pre><code>0.0.0.0 23  10.1.1.2 23</code></pre>
<p>Would redirect all connections to port 23, for all IP addresses
assigned to the server. This is the default behavior for most other
programs.</p>
<h3 id="protocol-specification">Protocol Specification</h3>
<p>Ports default to TCP. To specify the protocol, append
<code>/udp</code> or <code>/tcp</code> to the port number:</p>
<pre><code>206.125.69.81 80/tcp  10.1.1.2 8000/tcp
0.0.0.0 53/udp  8.8.8.8 53/udp</code></pre>
<p><strong>Note:</strong> Mixed-mode forwarding (TCP to UDP or UDP to
TCP) is not currently supported.</p>
<h3 id="service-names">Service Names</h3>
<p>Service names can be specified instead of port numbers. On most
systems, service names are defined in the file
<code>/etc/services</code>.</p>
<h3 id="ip-addresses-and-hostnames">IP Addresses and Hostnames</h3>
<p>Both IP addresses and hostnames are accepted for <em>bindaddress</em>
and <em>connectaddress</em>, including IPv6.</p>
<h2 id="forwarding-options">FORWARDING OPTIONS</h2>
<h3 id="udp-timeout-option">UDP Timeout Option</h3>
<p>Since UDP is a connectionless protocol, a timeout is necessary or
forwarding connections may accumulate with time and exhaust resources.
By default, if no data is sent or received on a UDP connection for 10
seconds, the other connection is closed. This value can be changed using
the <em>timeout</em> option:</p>
<pre><code>0.0.0.0 8000/udp  10.1.1.2 53/udp  [timeout=3600]</code></pre>
<p>This rule will forward all data received on UDP port 8000 to host
10.1.1.2 on UDP port 53, and will close the connection after no data is
received on the UDP port for 3600 seconds.</p>
<p><strong>Note:</strong> rinetd-uv limits UDP connections to 1000
concurrent outgoing connections per forwarding rule to prevent file
descriptor exhaustion. When this limit is reached, the oldest (least
recently used) connection is automatically closed to make room for new
connections. This is particularly important for high-volume UDP proxies
(e.g., DNS).</p>
<h3 id="source-address-option">Source Address Option</h3>
<p>A forwarding rule option allows binding to a specific local address
when sending data to the other end. This is done using the <em>src</em>
option:</p>
<pre><code>192.168.1.1 80  10.1.1.127 80  [src=10.1.1.2]</code></pre>
<p>Assuming the local host has two IP addresses, 10.1.1.1 and 10.1.1.2,
this rule ensures that forwarded packets are sent using source address
10.1.1.2.</p>
<h3 id="tcp-keepalive-option">TCP Keepalive Option</h3>
<p>TCP keepalive is enabled by default for all TCP connections to detect
dead connections. To disable it for a specific forwarding rule, use the
<em>keepalive</em> option:</p>
<pre><code>192.168.1.1 80/tcp  10.1.1.127 80/tcp  [keepalive=off]</code></pre>
<p>When enabled, keepalive probes are sent after 60 seconds of
inactivity.</p>
<h3 id="dns-refresh-option">DNS Refresh Option</h3>
<p>For forwarding rules with backend hostnames (not IP addresses),
<strong>rinetd-uv</strong> can automatically re-resolve DNS hostnames at
configurable intervals. This ensures that if a backend’s IP address
changes, new connections will use the updated address.</p>
<p><strong>Global configuration:</strong></p>
<pre><code>dns-refresh 600</code></pre>
<p>This sets the default DNS refresh interval to 600 seconds (10
minutes) for all forwarding rules with hostnames.</p>
<p><strong>Per-rule configuration:</strong></p>
<pre><code>0.0.0.0 8080/tcp backend.example.com 80 [dns-refresh=300]</code></pre>
<p>This overrides the global setting, refreshing this specific backend
every 300 seconds (5 minutes).</p>
<p><strong>Disable for specific rule:</strong></p>
<pre><code>0.0.0.0 8081/tcp backend2.example.com 80 [dns-refresh=0]</code></pre>
<p>Setting <code>dns-refresh=0</code> disables periodic DNS refresh for
this rule.</p>
<p><strong>Behavior:</strong></p>
<ul>
<li><strong>Hostname detection:</strong> DNS refresh is only enabled for
backend (target) hostnames. Rules with IP addresses (IPv4 or IPv6)
automatically skip DNS refresh.</li>
<li><strong>Existing connections:</strong> Continue using the old IP
address until they close naturally.</li>
<li><strong>New connections:</strong> Immediately use the newly resolved
IP address.</li>
<li><strong>Failure-triggered refresh:</strong> After 3 consecutive
connection failures to a backend, DNS is re-resolved immediately
(regardless of the timer interval).</li>
<li><strong>SIGHUP compatibility:</strong> Sending SIGHUP still forces
immediate re-resolution of all hostnames (existing behavior
preserved).</li>
</ul>
<p><strong>Default:</strong> 600 seconds (10 minutes)</p>
<p><strong>Example configuration:</strong></p>
<pre><code># Global default: refresh every 10 minutes
dns-refresh 600

# Critical service: refresh more frequently
0.0.0.0 443/tcp api.example.com 443 [dns-refresh=60]

# Static IP backend: no DNS refresh needed
0.0.0.0 8080/tcp 192.168.1.100 8080

# Long-lived connections: refresh less frequently
0.0.0.0 8000/tcp cache.example.com 6379 [dns-refresh=1800]

# Disable for this specific rule
0.0.0.0 9000/tcp static.example.com 9000 [dns-refresh=0]</code></pre>
<h2 id="global-configuration-options">GLOBAL CONFIGURATION OPTIONS</h2>
<h3 id="buffer-size">Buffer Size</h3>
<p>The buffer size used for I/O operations can be configured globally.
This affects memory usage and performance characteristics.</p>
<pre><code>buffersize 32768</code></pre>
<p><strong>Range:</strong> 1024 to 1048576 bytes (1 KB to 1 MB)
<strong>Default:</strong> 65536 bytes (64 KB)</p>
<p><strong>Recommendations:</strong> - <strong>DNS proxy (small
packets):</strong> <code>buffersize 2048</code> - Reduces memory usage -
<strong>HTTP proxy (medium packets):</strong>
<code>buffersize 32768</code> - Balanced performance - <strong>High
throughput:</strong> <code>buffersize 131072</code> - Maximum
performance (if memory allows) - <strong>Memory-constrained
systems:</strong> <code>buffersize 4096</code> - Minimum practical
size</p>
<p>The buffer size multiplied by the number of concurrent connections
determines total memory usage. For example, with 1000 concurrent
connections: - <code>buffersize 4096</code>: ~4 MB memory -
<code>buffersize 65536</code>: ~64 MB memory</p>
<h3 id="dns-refresh">DNS Refresh</h3>
<p>The global DNS refresh interval can be configured to set the default
for all forwarding rules with backend hostnames:</p>
<pre><code>dns-refresh 600</code></pre>
<p><strong>Range:</strong> 0 to unlimited seconds
<strong>Default:</strong> 600 seconds (10 minutes)</p>
<p>This global setting applies to all forwarding rules unless overridden
by a per-rule <code>[dns-refresh=N]</code> option. See the <strong>DNS
Refresh Option</strong> section under <strong>FORWARDING
OPTIONS</strong> for detailed documentation and examples.</p>
<h3 id="logging">Logging</h3>
<p><strong>rinetd-uv</strong> is able to produce a log file in either of
two formats: tab-delimited and web server-style “common log format”.</p>
<p>By default, <strong>rinetd-uv</strong> does not produce a log file.
To activate logging, add the following line to the configuration
file:</p>
<pre><code>logfile /var/log/rinetd-uv.log</code></pre>
<p>By default, <strong>rinetd-uv</strong> logs in a simple tab-delimited
format containing the following information:</p>
<ul>
<li>Date and time</li>
<li>Client address</li>
<li>Listening host</li>
<li>Listening port</li>
<li>Forwarded-to host</li>
<li>Forwarded-to port</li>
<li>Bytes received from client</li>
<li>Bytes sent to client</li>
<li>Result message</li>
</ul>
<p>To activate web server-style “common log format” logging, add the
following line to the configuration file:</p>
<pre><code>logcommon</code></pre>
<h3 id="pid-file">PID File</h3>
<p>Under Linux the process ID is saved in the file
<code>/var/run/rinetd-uv.pid</code> by default. An alternate filename
can be provided:</p>
<pre><code>pidfile /var/run/myrinetd-uv.pid</code></pre>
<h2 id="include-directive">INCLUDE DIRECTIVE</h2>
<p>Configuration files can include other configuration files using the
<code>include</code> directive. This allows splitting large
configurations into multiple files for better organization and
maintainability.</p>
<h3 id="syntax">Syntax</h3>
<pre><code>include pattern</code></pre>
<p>The <code>pattern</code> can be: - <strong>Single file</strong>:
<code>include servers.conf</code> - <strong>Wildcard pattern</strong>:
<code>include conf.d/*.conf</code> - <strong>Absolute path</strong>:
<code>include /etc/rinetd-uv/servers.conf</code> - <strong>Relative
path</strong>: Resolved relative to the current config file’s
directory</p>
<h3 id="features">Features</h3>
<ul>
<li><strong>Wildcard Support</strong>: Use glob patterns like
<code>*.conf</code> or <code>server-*.conf</code> to include multiple
files</li>
<li><strong>Nested Includes</strong>: Included files can include other
files (up to 10 levels deep)</li>
<li><strong>Circular Detection</strong>: Automatically prevents circular
includes</li>
<li><strong>Depth Limit</strong>: Maximum include depth is 10 levels to
prevent infinite recursion</li>
<li><strong>Optional Includes</strong>: If a pattern matches no files, a
warning is logged but parsing continues</li>
<li><strong>Sorted Loading</strong>: When using wildcards, files are
loaded in alphabetical order</li>
</ul>
<h3 id="examples">Examples</h3>
<p><strong>Basic include:</strong></p>
<pre><code># Include a single file
include /etc/rinetd-uv.d/database-servers.conf</code></pre>
<p><strong>Wildcard pattern:</strong></p>
<pre><code># Include all .conf files from a directory
include /etc/rinetd-uv.d/*.conf</code></pre>
<p><strong>Relative paths:</strong></p>
<pre><code># In /etc/rinetd-uv.conf:
include conf.d/*.conf

# This resolves to /etc/conf.d/*.conf</code></pre>
<p><strong>Organized configuration structure:</strong></p>
<pre><code># Main config: /etc/rinetd-uv.conf
logfile /var/log/rinetd-uv.log
pidfile /var/run/rinetd-uv.pid

# Global access control
allow 10.0.0.*
deny 192.168.1.100

# Include server-specific configs
include conf.d/web-servers.conf
include conf.d/database-servers.conf
include conf.d/dns-servers.conf</code></pre>
<h3 id="error-handling">Error Handling</h3>
<ul>
<li><strong>No matches</strong>: If a pattern matches no files, a
warning is logged and parsing continues</li>
<li><strong>Circular includes</strong>: Detected and causes immediate
error</li>
<li><strong>Maximum depth exceeded</strong>: More than 10 levels of
nesting causes an error</li>
<li><strong>File not found</strong>: Individual file errors cause
immediate failure</li>
<li><strong>Permission denied</strong>: Causes immediate error</li>
</ul>
<h2 id="allow-and-deny-rules">ALLOW AND DENY RULES</h2>
<p>Configuration files can also contain allow and deny rules.</p>
<p>Allow rules which appear <strong>before the first forwarding
rule</strong> are applied globally: if at least one global allow rule
exists, and the address of a new connection does not satisfy at least
one of the global allow rules, that connection is immediately rejected,
regardless of any other rules.</p>
<p>Allow rules which appear <strong>after a specific forwarding
rule</strong> apply to that forwarding rule only. If at least one allow
rule exists for a particular forwarding rule, and the address of a new
connection does not satisfy at least one of the allow rules for that
forwarding rule, that connection is immediately rejected, regardless of
any other rules.</p>
<p>Deny rules which appear <strong>before the first forwarding
rule</strong> are applied globally: if the address of a new connection
satisfies any of the global deny rules, that connection is immediately
rejected, regardless of any other rules.</p>
<p>Deny rules which appear <strong>after a specific forwarding
rule</strong> apply to that forwarding rule only. If the address of a
new connection satisfies any of the deny rules for that forwarding rule,
that connection is immediately rejected, regardless of any other
rules.</p>
<h3 id="rule-format">Rule Format</h3>
<p>The format of an allow or deny rule is as follows:</p>
<pre><code>allow pattern
deny pattern</code></pre>
<p>Patterns can contain the following characters: <code>0</code>,
<code>1</code>, <code>2</code>, <code>3</code>, <code>4</code>,
<code>5</code>, <code>6</code>, <code>7</code>, <code>8</code>,
<code>9</code>, <code>.</code> (period), <code>?</code>, and
<code>*</code>. The <code>?</code> wildcard matches any one character.
The <code>*</code> wildcard matches any number of characters, including
zero.</p>
<p>For example:</p>
<pre><code>allow 206.125.69.*</code></pre>
<p>This allow rule matches all IP addresses in the 206.125.69 class C
domain.</p>
<p><strong>Important:</strong> Host names are <strong>NOT</strong>
permitted in allow and deny rules. The performance cost of looking up IP
addresses to find their corresponding names is prohibitive. Since
<strong>rinetd-uv</strong> is a single process server, all other
connections would be forced to pause during the address lookup.</p>
<h2 id="example-configuration">EXAMPLE CONFIGURATION</h2>
<pre><code># rinetd-uv.conf - example configuration

# Global options
logfile /var/log/rinetd-uv.log
# logcommon  # Use Apache-style logging

# PID file
pidfile /var/run/rinetd-uv.pid

# Buffer size configuration (1KB - 1MB, default: 65536)
# Smaller values reduce memory usage and latency, larger values improve throughput
buffersize 65536  # 64KB is the default

# DNS refresh interval (default: 600 seconds = 10 minutes)
# Automatically re-resolves backend hostnames at specified intervals
# Set to 0 to disable, or override per-rule with [dns-refresh=N]
dns-refresh 600

# Global Access Control:
# You may specify global allow and deny rules here.
# Only ip addresses are matched, hostnames cannot be specified here.
# The wildcards you may use are * and ?
#
allow 192.168.2.*
deny 192.168.2.1?
allow fe80:*
deny 2001:618:*:e43f

# You can split your configuration across multiple files
include /etc/rinetd-uv.d/*.conf
# include conf.d/servers.conf

# Forwarding options:
# Format: bindaddress bindport connectaddress connectport [options]
# Options: [timeout=seconds,src=sourceaddress,keepalive=on/off,dns-refresh=seconds]
# Note: TCP keepalive is enabled by default

# TCP forwarding examples
0.0.0.0 80/tcp 192.168.1.10 8080/tcp
192.168.0.1 https server.example.com 8443 [src=192.168.1.1]
0.0.0.0 444 api.example.com 444 [dns-refresh=60]
:: http ipv6.google.com http

# UDP forwarding example
0.0.0.0 53/udp 8.8.8.8 53/udp [timeout=30]

# Per-rule Access Control (applies to previous forwarding rule)
0.0.0.0 22 192.168.1.20 22
allow 10.0.0.*
</code></pre>
<h2 id="reinitializing-rinetd-uv">REINITIALIZING RINETD-UV</h2>
<p>The SIGHUP signal can be used to cause <strong>rinetd-uv</strong> to
reload its configuration file without interrupting existing
connections.</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="bu">kill</span> <span class="at">-HUP</span> <span class="va">$(</span><span class="fu">cat</span> /var/run/rinetd-uv.pid<span class="va">)</span></span></code></pre></div>
<p>Or simply:</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">killall</span> <span class="at">-HUP</span> rinetd-uv</span></code></pre></div>
<h2 id="run-with-docker">RUN WITH DOCKER</h2>
<p>There’s simple <code>Dockerfile</code> provided to create working
docker image with <strong>rinetd-uv</strong> built from sources (HEAD).
Image is based on Debian Linux. Thanks to using <code>-slim</code> base
image and 2-stage build final image size shouldn’t exceed 100MB.</p>
<p>Build the image:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> rinetd-uv .</span></code></pre></div>
<p>Example run:</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-d</span> <span class="at">--name</span> rinetd-uv <span class="at">--user</span> nobody <span class="at">--ulimit</span> nofile=65000 <span class="at">--publish</span> 8080:8080 <span class="at">--publish</span> 5353:5353/udp <span class="at">--volume</span> ./rinetd-uv.conf:/etc/rinetd-uv.conf:ro rinetd-uv</span></code></pre></div>
<h2 id="bugs-and-limitations">BUGS AND LIMITATIONS</h2>
<p><strong>rinetd-uv</strong> only redirects protocols which use a
single TCP or UDP socket. This rules out FTP (which uses multiple
connections for data transfer).</p>
<p>The server redirected to is not able to identify the host the client
really came from. This cannot be corrected; however, the log produced by
<strong>rinetd-uv</strong> provides a way to obtain this
information.</p>
<p>Two rules with the same source ip/port and different destination
ip/port are not allowed (you’ll get “Address already in use” or similar
error). Note that <code>0.0.0.0</code> (IPv4) and <code>::</code> (IPv6)
effectively mean the same (both would bind to “any” address).</p>
<h3 id="incompatibilities">Incompatibilities</h3>
<p><strong>rinetd-uv</strong> was meant as drop-in replacement for
<strong>rinetd</strong>, although there are some differences</p>
<ul>
<li>logging format and behavior changed slightly: date is in the iso
format (yyyy-mm-dd hh:mm:ss), for every connection 2 lines are logged -
one with ‘open’ result and one with ‘done-’ result (which contain valid
values for transferred data sizes)</li>
<li><code>pidlogfile</code> option was renamed to
<code>pidfile</code></li>
<li>original rinetd mentioned possibility to proxy traffic between
differen protocols (UDP &lt;-&gt; TCP), in <strong>rinetd-uv</strong>
it’s not possible due to fundamental protocol incompatibilities. See
<code>TCP-UDP_MIXED_MODE.md</code> for technical details.</li>
</ul>
<h2 id="performance-notes">PERFORMANCE NOTES</h2>
<p><strong>rinetd-uv</strong> uses libuv for event-driven I/O, providing
excellent performance characteristics:</p>
<ul>
<li>Single-process, event-driven architecture</li>
<li>Dynamic buffer allocation with zero-copy forwarding</li>
<li>Efficient handling of thousands of concurrent connections</li>
<li>Low CPU overhead per connection</li>
</ul>
<p>Memory usage can be tuned via the <code>buffersize</code> option.
Typical memory usage:</p>
<pre><code>Total Memory = buffersize × concurrent_connections</code></pre>
<p>For high-performance deployments, consider: - Using larger buffer
sizes (64 KB - 128 KB) for better throughput - Using smaller buffer
sizes (2 KB - 8 KB) when memory is constrained - Monitoring active
connections and adjusting buffer size accordingly</p>
<h2 id="license">LICENSE</h2>
<p>Copyright (c) 1997, 1998, 1999, Thomas Boutell and Boutell.Com,
Inc.</p>
<p>Copyright (c) 2003-2025 Sam Hocevar</p>
<p>Copyright (c) 2026 Marcin Gryszkalis</p>
<p>This software is released for free use under the terms of the GNU
General Public License, version 2 or higher. NO WARRANTY IS EXPRESSED OR
IMPLIED. USE THIS SOFTWARE AT YOUR OWN RISK.</p>
<h2 id="contact-information">CONTACT INFORMATION</h2>
<p>See https://github.com/marcin-gryszkalis/rinetd for the latest
release.</p>
<p><strong>Marcin Gryszkalis</strong> can be reached by email:
mg@fork.pl</p>
<p><strong>Sam Hocevar</strong> can be reached by email:
sam@hocevar.net</p>
<p><strong>Thomas Boutell</strong> can be reached by email:
boutell@boutell.com</p>
<h2 id="thanks">THANKS</h2>
<p>Thanks are due to Bill Davidsen, Libor Pechachek, Sascha Ziemann, the
Apache Group, and many others who have contributed advice and/or source
code to this and other free software projects.</p>
<h2 id="llm">LLM</h2>
<p>This implementation was created with support of assorted LLM agents
(Claude Opus, Claude Sonnet, Gemini, GPT). The architecure and code was
reviewed by human.</p>
<h2 id="see-also">SEE ALSO</h2>
<h3 id="links">Links</h3>
<ul>
<li>rinetd-uv: https://github.com/marcin-gryszkalis/rinetd</li>
<li>original rinetd: https://github.com/samhocevar/rinetd</li>
</ul>
<h3 id="additional-documentation">Additional Documentation</h3>
<ul>
<li>[[BUILD.md]] - Build requirements and instructions</li>
<li>[[TCP-UDP_MIXED_MODE.md]] - Technical analysis of mixed-mode
limitations</li>
</ul>
</body>
</html>
